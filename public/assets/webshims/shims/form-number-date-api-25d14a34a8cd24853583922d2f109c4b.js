webshims.register("form-number-date-api",function(e,t,r,a){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,r){var a=e.attr(t,"step");return"any"===a?a:(r=r||o(t),u[r]&&u[r].step?(a=N.number.asNumber(a),(!isNaN(a)&&a>0?a:u[r].step)*(u[r].stepScaleFactor||1)):a)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,r){e+"AsNumber"in r||(r[e+"AsNumber"]=u[r.type].asNumber(t.attr(e)),isNaN(r[e+"AsNumber"])&&e+"Default"in u[r.type]&&(r[e+"AsNumber"]=u[r.type][e+"Default"]))});var n=parseInt("NaN",10),u=t.inputTypes,i=function(e){return"number"==typeof e||e&&e==1*e},s=function(t){return e('<input type="'+t+'" />').prop("type")===t},o=function(e){return(e.getAttribute("type")||"").toLowerCase()},p=function(e){return e&&!isNaN(1*e)},l=t.addMinMaxNumberToCache,m=function(e,t){e=""+e,t-=e.length;for(var r=0;t>r;r++)e="0"+e;return e},f=1e-7,d=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,r,a,n){if(""===r)return!1;if("type"in a||(a.type=o(e[0])),"week"==a.type)return!1;var i,s=(n||{}).stepMismatch||!1;if(u[a.type]&&u[a.type].step){if("step"in a||(a.step=t.getStep(e[0],a.type)),"any"==a.step)return!1;if("valueAsNumber"in a||(a.valueAsNumber=u[a.type].asNumber(r)),isNaN(a.valueAsNumber))return!1;l("min",e,a),i=a.minAsNumber,isNaN(i)&&(i=u[a.type].stepBase||0),s=Math.abs((a.valueAsNumber-i)%a.step),s=!(f>=s||Math.abs(s-a.step)<=f)}return s}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,r,a,n){var i=(n||{})[e.name]||!1;if(""===r)return i;if("type"in a||(a.type=o(t[0])),u[a.type]&&u[a.type].asNumber){if("valueAsNumber"in a||(a.valueAsNumber=u[a.type].asNumber(r)),isNaN(a.valueAsNumber))return!1;if(l(e.attr,t,a),isNaN(a[e.attr+"AsNumber"]))return i;i=a[e.attr+"AsNumber"]*e.factor<a.valueAsNumber*e.factor-f}return i})}),t.reflectProperties(["input"],["max","min","step"]);var c=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,r=o(t),a=u[r]&&u[r].asNumber?u[r].asNumber(e.prop(t,"value")):c.prop._supget&&c.prop._supget.apply(t,arguments);return null==a&&(a=n),a},set:function(r){var a=this,n=o(a);if(u[n]&&u[n].numberToString){if(isNaN(r))return e.prop(a,"value",""),void 0;var i=u[n].numberToString(r);i!==!1?e.prop(a,"value",i):t.error("INVALID_STATE_ERR: DOM Exception 11")}else c.prop._supset&&c.prop._supset.apply(a,arguments)}}}),b=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,r=o(t);return u[r]&&u[r].asDate&&!u[r].noAsDate?u[r].asDate(e.prop(t,"value")):b.prop._supget&&b.prop._supget.call(t)||null},set:function(r){var a=this,n=o(a);if(!u[n]||!u[n].dateToString||u[n].noAsDate)return b.prop._supset&&b.prop._supset.apply(a,arguments)||null;if(null===r)return e.prop(a,"value",""),"";var i=u[n].dateToString(r);return i!==!1?(e.prop(a,"value",i),i):(t.error("INVALID_STATE_ERR: DOM Exception 11"),void 0)}}});e.each({stepUp:1,stepDown:-1},function(r,a){var n=t.defineNodeNameProperty("input",r,{prop:{value:function(r){var i,s,p,l,m,d,c=o(this);if(!u[c]||!u[c].asNumber){if(n.prop&&n.prop.value)return n.prop.value.apply(this,arguments);throw t.info("no step method for type: "+c),"invalid state error"}if(d={type:c},r||(r=1,t.info("you should always use a factor for stepUp/stepDown")),r*=a,s=e.prop(this,"valueAsNumber"),isNaN(s))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(i=t.getStep(this,c),"any"==i)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),d),t.addMinMaxNumberToCache("max",e(this),d),i*=r,s=1*(s+i).toFixed(5),l=(s-(d.minAsNumber||0))%i,l&&Math.abs(l)>f&&(m=s-l,m+=l>0?i:-i,s=1*m.toFixed(5)),!isNaN(d.maxAsNumber)&&s>d.maxAsNumber||!isNaN(d.minAsNumber)&&s<d.minAsNumber)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";p?e.prop(this,"valueAsDate",p):e.prop(this,"valueAsNumber",s)}}})});var N={number:{bad:function(e){return!i(e)},step:1,stepScaleFactor:1,asNumber:function(e){return i(e)?1*e:n},numberToString:function(e){return i(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{bad:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{bad:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,r=e.split(/\u002D/);if(3!==r.length)return!0;var a=!1;if(r[0].length<4||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)a=!0;else for(t=0;3>t;t++)if(!p(r[t])){a=!0;break}return a||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.bad(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var r=n;return(t||!this.bad(e))&&(e=e.split(/\u002D/),r=Date.UTC(e[0],e[1]-1,e[2])),r},numberToString:function(e){return i(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?m(e.getUTCFullYear(),4)+"-"+m(e.getUTCMonth()+1,2)+"-"+m(e.getUTCDate(),2):!1}},time:{bad:function(t,r){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),t.length<2||t.length>3)return!0;var a,n=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),a=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return p(t)&&2===t.length?void 0:(n=!0,!1)}),n?!0:t[0]>23||t[0]<0||t[1]>59||t[1]<0?!0:t[2]&&(t[2]>59||t[2]<0)?!0:a&&isNaN(a)?!0:(a&&(100>a?a*=100:10>a&&(a*=10)),r===!0?[t,a]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=n;return e=this.bad(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=m(e.getUTCHours(),2)+":"+m(e.getUTCMinutes(),2),r=e.getSeconds();return"0"!=r&&(t+=":"+m(r,2)),r=e.getUTCMilliseconds(),"0"!=r&&(t+="."+m(r,3)),t}return!1}},month:{bad:function(e){return N.date.bad(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(N.date.asNumber(e+"-01"))},asNumber:function(e){var t=n;return e&&!this.bad(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,r=!1;return i(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),r=m(e,4)+"-"+m(t,2)),r},dateToString:function(e){if(e&&e.getUTCHours){var t=N.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}},"datetime-local":{bad:function(e,t){return e&&e.split&&2===(e+"special").split(/\u0054/).length?(e=e.split(/\u0054/),N.date.bad(e[0])||N.time.bad(e[1],t)):!0},noAsDate:!0,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=n,r=this.bad(e,!0);return r!==!0&&(e=e.split(/\u0054/)[0].split(/\u002D/),t=Date.UTC(e[0],e[1]-1,e[2],r[0][0],r[0][1],r[0][2]||0),r[1]&&(t+=r[1])),t},dateToString:function(e,t){return N.date.dateToString(e)+"T"+N.time.dateToString(e,t)}}};!d&&s("range")&&s("time")&&s("month")&&s("datetime-local")||(N.range=e.extend({},N.number,N.range),N.time=e.extend({},N.date,N.time),N.month=e.extend({},N.date,N.month),N["datetime-local"]=e.extend({},N.date,N.time,N["datetime-local"])),["number","month","range","date","time","color","datetime-local"].forEach(function(e){(d||!s(e))&&t.addInputType(e,N[e])}),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,r=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(r=r.add('label[for="'+t+'"]')),r.get()},writeable:!1}})});