webshim.register("url",function(e,t,n,r,a){"use strict";!function(e){function t(e){if(o)return new i(e);var t=r.createElement("a");return t.href=e,t}var o,i=e.URL;try{if(i){if(o=new e.URL("http://example.com"),"searchParams"in o)return;"href"in o||(o=a)}}catch(u){}if(e.URL=function(a,u){function c(e,t){var n=e.split("&");t&&-1===n[0].indexOf("=")&&(n[0]="="+n[0]);var r=[];n.forEach(function(e){if(0!==e.length){var t=e.indexOf("=");if(-1!==t)var n=e.substring(0,t),a=e.substring(t+1);else n=e,a="";n=n.replace("+"," "),a=a.replace("+"," "),r.push({name:n,value:a})}});var a=[];return r.forEach(function(e){a.push({name:decodeURIComponent(e.name),value:decodeURIComponent(e.value)})}),a}function s(e,t){function n(){o||(o=!0,e.search=r(a),o=!1)}function r(e){var t="",n=!0;return e.forEach(function(e){var r=encodeURIComponent(e.name),a=encodeURIComponent(e.value);n||(t+="&"),t+=r+"="+a,n=!1}),t}var a=[];t&&(a=c(t)),this._setPairs=function(e){a=e},this._updateSteps=function(){n()};var o=!1;webshim.defineProperties(this,{append:{value:function(e,t){a.push({name:e,value:t}),n()}},"delete":{value:function(e){for(var t=0;t<a.length;)a[t].name===e?a.splice(t,1):++t;n()}},get:{value:function(e){for(var t=0;t<a.length;++t)if(a[t].name===e)return a[t].value;return null}},getAll:{value:function(e){for(var t=[],n=0;n<a.length;++n)a[n].name===e&&t.push(a[n].value);return t}},has:{value:function(e){for(var t=0;t<a.length;++t)if(a[t].name===e)return!0;return!1}},set:{value:function(e,t){for(var r=!1,o=0;o<a.length;)a[o].name===e?r?a.splice(o,1):(a[o].value=t,++o):++o;n()}},toString:{value:function(){return r(a)}}})}function f(){var e=l.href.replace(/#$|\?$|\?(?=#)/g,"");l.href!==e&&(l.href=e)}function h(){v._setPairs(l.search?c(l.search.substring(1)):[]),v._updateSteps()}if(!(this instanceof e.URL))throw new TypeError("Failed to construct 'URL': Please use the 'new' operator.");u&&(a=function(){if(o)return new i(a,u).href;var e;if(r.implementation&&r.implementation.createHTMLDocument?e=r.implementation.createHTMLDocument(""):r.implementation&&r.implementation.createDocument?(e=r.implementation.createElement("http://www.w3.org/1999/xhtml","html",null),e.documentElement.appendChild(e.createElement("head")),e.documentElement.appendChild(e.createElement("body"))):n.ActiveXObject&&(e=new n.ActiveXObject("htmlfile"),e.write("<head></head><body></body>"),e.close()),!e)throw Error("base not supported");var t=e.createElement("base");t.href=u,e.getElementsByTagName("head")[0].appendChild(t);var c=e.createElement("a");return c.href=a,c.href}());var l=t(a||""),p=Object.defineProperties&&function(){var e={};return Object.defineProperties(e,{p:{get:function(){return!0}}}),e.p}(),m=p?this:r.createElement("a"),v=new s(m,l.search?l.search.substring(1):null);return webshim.defineProperties(m,{href:{get:function(){return l.href},set:function(e){l.href=e,f(),h()}},origin:{get:function(){return"origin"in l?l.origin:this.protocol+"//"+this.host}},protocol:{get:function(){return l.protocol},set:function(e){l.protocol=e}},username:{get:function(){return l.username},set:function(e){l.username=e}},password:{get:function(){return l.password},set:function(e){l.password=e}},host:{get:function(){var e={"http:":/:80$/,"https:":/:443$/,"ftp:":/:21$/}[l.protocol];return e?l.host.replace(e,""):l.host},set:function(e){l.host=e}},hostname:{get:function(){return l.hostname},set:function(e){l.hostname=e}},port:{get:function(){return l.port},set:function(e){l.port=e}},pathname:{get:function(){return"/"!==l.pathname.charAt(0)?"/"+l.pathname:l.pathname},set:function(e){l.pathname=e}},search:{get:function(){return l.search},set:function(e){l.search!==e&&(l.search=e,f(),h())}},searchParams:{get:function(){return v}},hash:{get:function(){return l.hash},set:function(e){l.hash=e,f()}}}),m},i)for(var c in i)i.hasOwnProperty(c)&&(e.URL[c]=i[c])}(n)});