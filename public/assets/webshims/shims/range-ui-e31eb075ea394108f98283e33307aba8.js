!function(t){var i=function(t){return"number"==typeof t||t&&t==1*t},e=function(t,i){return"number"==typeof t||t&&t==1*t?1*t:i},s=["step","min","max","readonly","title","disabled","tabindex"],n={_create:function(){var i;for(this.element.addClass("ws-range").attr({role:"slider"}).append('<span class="ws-range-min" /><span class="ws-range-rail"><span class="ws-range-thumb" /></span>'),this.trail=t(".ws-range-rail",this.element),this.range=t(".ws-range-min",this.element),this.thumb=t(".ws-range-thumb",this.trail),this.updateMetrics(),this.orig=this.options.orig,i=0;i<s.length;i++)this[s[i]](this.options[s[i]]);this.value=this._value,this.value(this.options.value),this.initDataList(),this.element.data("rangeUi",this),this.addBindings(),this._init=!0},value:t.noop,_value:function(i,e,s){var n,a,o=this.options,h=i,r={},l={};e||parseFloat(i,10)==i||(i=o.min+(o.max-o.min)/2),e||(i=this.normalizeVal(i)),n=100*((i-o.min)/(o.max-o.min)),this._init&&i==o.value&&h==i||(this.options.value=i,this.thumb.stop(),this.range.stop(),l[this.dirs.width]=n+"%",this.vertical&&(n=Math.abs(n-100)),r[this.dirs.left]=n+"%",s?(s="object"!=typeof s?{}:t.extend({},s),s.duration||(a=Math.abs(n-parseInt(this.thumb[0].style[this.dirs.left]||50,10)),s.duration=Math.max(Math.min(999,5*a),99)),this.thumb.animate(r,s),this.range.animate(l,s)):(this.thumb.css(r),this.range.css(l)),this.orig&&(h!=i||!this._init&&this.orig.value!=i)&&this.options._change(i),this.element.attr({"aria-valuenow":this.options.value,"aria-valuetext":this.options.textValue?this.options.textValue(this.options.value):this.options.options[this.options.value]||this.options.value}))},initDataList:function(){if(this.orig){var i,e=this,s=function(){t(e.orig).jProp("list").off("updateDatalist",s).on("updateDatalist",s),clearTimeout(i),i=setTimeout(function(){e.list&&e.list()},9)};t(this.orig).on("listdatalistchange",s),this.list()}},list:function(){var e=this.options,s=e.min,n=e.max,a=this.trail,o=this;this.element.attr({"aria-valuetext":e.options[e.value]||e.value}),t(".ws-range-ticks",a).remove(),t(this.orig).jProp("list").find("option:not([disabled])").each(function(){e.options[t.prop(this,"value")]=t.prop(this,"label")||""}),t.each(e.options,function(h,r){if(!(!i(h)||s>h||h>n)){var l=100*((h-s)/(n-s)),u=e.showLabels&&r?' title="'+r+'"':"";o.vertical&&(l=Math.abs(l-100)),o.posCenter(t('<span class="ws-range-ticks"'+u+' data-label="'+r+'" style="'+o.dirs.left+": "+l+'%;" />').appendTo(a))}})},readonly:function(t){t=!!t,this.options.readonly=t,this.element.attr("aria-readonly",""+t),this._init&&this.updateMetrics()},disabled:function(t){t=!!t,this.options.disabled=t,t?this.element.attr({tabindex:-1,"aria-disabled":"true"}):this.element.attr({tabindex:this.options.tabindex,"aria-disabled":"false"}),this._init&&this.updateMetrics()},tabindex:function(t){this.options.tabindex=t,this.options.disabled||this.element.attr({tabindex:t})},title:function(t){this.element.prop("title",t)},min:function(t){this.options.min=e(t,0),this.value(this.options.value,!0)},max:function(t){this.options.max=e(t,100),this.value(this.options.value,!0)},step:function(t){this.options.step="any"==t?"any":e(t,1),this.value(this.options.value)},normalizeVal:function(t){var i,e,s,n=this.options;return t<=n.min?t=n.min:t>=n.max?t=n.max:"any"!=n.step&&(s=n.step,i=(t-n.min)%s,e=t-i,2*Math.abs(i)>=s&&(e+=i>0?s:-s),t=1*e.toFixed(5)),t},doStep:function(t,i){var s=e(this.options.step,1);"any"==this.options.step&&(s=Math.min(s,(this.options.max-this.options.min)/10)),this.value(this.options.value+s*t,!1,i)},getStepedValueFromPos:function(t){var i,e,s,n;return 0>=t?i=this.options[this.dirs.min]:t>100?i=this.options[this.dirs.max]:(this.vertical&&(t=Math.abs(t-100)),i=(this.options.max-this.options.min)*(t/100)+this.options.min,n=this.options.step,"any"!=n&&(e=(i-this.options.min)%n,s=i-e,2*Math.abs(e)>=n&&(s+=e>0?n:-n),i=1*s.toFixed(5))),i},addRemoveClass:function(t,i){var e,s=-1!=this.element.prop("className").indexOf(t);!i&&s?(e="removeClass",this.element.removeClass(t),this.updateMetrics()):i&&!s&&(e="addClass"),e&&(this.element[e](t),this._init&&this.updateMetrics())},addBindings:function(){var i,e,s,n=this,a=this.options,o=function(){var i={};return{init:function(e,s,a){i[e]||(i[e]={fn:a},n.orig&&t(n.orig).on(e,function(){i[e].val=t.prop(n.orig,"value")})),i[e].val=s},call:function(t,e){i[t].val!=e&&(clearTimeout(i[t].timer),i[t].val=e,i[t].timer=setTimeout(function(){i[t].fn(e,n)},0))}}}(),h=function(t,s){var h=n.getStepedValueFromPos((t[n.dirs.mouse]-i)*e);h!=a.value&&(n.value(h,!1,s),o.call("input",h)),t&&"mousemove"==t.type&&t.preventDefault()},r=function(i){i&&"mouseup"==i.type&&(o.call("input",a.value),o.call("change",a.value)),n.addRemoveClass("ws-active"),t(document).off("mousemove",h).off("mouseup",r),t(window).off("blur",l)},l=function(t){t.target==window&&r()},u=function(s){var o;if(s.preventDefault(),t(document).off("mousemove",h).off("mouseup",r),t(window).off("blur",l),!a.readonly&&!a.disabled){if(n.element.focus(),n.addRemoveClass("ws-active",!0),i=n.element.focus().offset(),e=n.element[n.dirs.innerWidth](),!e||!i)return;o=n.thumb[n.dirs.outerWidth](),i=i[n.dirs.pos],e=100/e,h(s,a.animate),t(document).on({mouseup:r,mousemove:h}),t(window).on("blur",l),s.stopPropagation()}},m={mousedown:u,focus:function(){a.disabled||(o.init("input",a.value),o.init("change",a.value),n.addRemoveClass("ws-focus",!0),n.updateMetrics()),s=!0},blur:function(){n.element.removeClass("ws-focus ws-active"),n.updateMetrics(),s=!1,o.init("input",a.value),o.call("change",a.value)},keyup:function(){n.addRemoveClass("ws-active"),o.call("input",a.value),o.call("change",a.value)},keydown:function(t){var i=!0,e=t.keyCode;a.readonly||a.disabled||(39==e||38==e?n.doStep(1):37==e||40==e?n.doStep(-1):33==e?n.doStep(10,a.animate):34==e?n.doStep(-10,a.animate):36==e?n.value(n.options.max,!1,a.animate):35==e?n.value(n.options.min,!1,a.animate):i=!1,i&&(n.addRemoveClass("ws-active",!0),o.call("input",a.value),t.preventDefault()))}};o.init("input",a.value,this.options.input),o.init("change",a.value,this.options.change),m[t.fn.mwheelIntent?"mwheelIntent":"mousewheel"]=function(t,i){i&&s&&!a.readonly&&!a.disabled&&(n.doStep(i),t.preventDefault(),o.call("input",a.value))},this.element.on(m),this.thumb.on({mousedown:u}),window.webshims&&webshims.ready("WINDOWLOAD",function(){webshims.ready("dom-support",function(){t.fn.onWSOff&&n.element.onWSOff("updateshadowdom",function(){n.updateMetrics()})}),!t.fn.onWSOff&&webshims._polyfill&&webshims._polyfill(["dom-support"])})},posCenter:function(t,i){var e;!this.options.calcCenter||this._init&&!this.element[0].offsetWidth||(t||(t=this.thumb),i||(i=t[this.dirs.outerWidth]()),i/=-2,t.css(this.dirs.marginLeft,i),this.options.calcTrail&&t[0]==this.thumb[0]&&(e=this.element[this.dirs.innerHeight](),t.css(this.dirs.marginTop,(t[this.dirs.outerHeight]()-e)/-2),this.range.css(this.dirs.marginTop,(this.range[this.dirs.outerHeight]()-e)/-2),i*=-1,this.trail.css(this.dirs.left,i).css(this.dirs.right,i)))},updateMetrics:function(){var t=this.element.innerWidth();this.vertical=t&&this.element.innerHeight()-t>10,this.dirs=this.vertical?{mouse:"pageY",pos:"top",min:"max",max:"min",left:"top",right:"bottom",width:"height",innerWidth:"innerHeight",innerHeight:"innerWidth",outerWidth:"outerHeight",outerHeight:"outerWidth",marginTop:"marginLeft",marginLeft:"marginTop"}:{mouse:"pageX",pos:"left",min:"min",max:"max",left:"left",right:"right",width:"width",innerWidth:"innerWidth",innerHeight:"innerHeight",outerWidth:"outerWidth",outerHeight:"outerHeight",marginTop:"marginTop",marginLeft:"marginLeft"},this.element[this.vertical?"addClass":"removeClass"]("vertical-range")[this.vertical?"addClass":"removeClass"]("horizontal-range"),this.posCenter()}},a=function(t){function i(){}return i.prototype=t,new i};t.fn.rangeUI=function(i){return i=t.extend({readonly:!1,disabled:!1,tabindex:0,min:0,step:1,max:100,value:50,input:t.noop,change:t.noop,_change:t.noop,showLabels:!0,options:{},calcCenter:!0,calcTrail:!0},i),this.each(function(){var e=t.extend(a(n),{element:t(this)});e.options=i,e._create.call(e)})},window.webshims&&webshims.isReady&&(webshims.ready("es5",function(){webshims.isReady("range-ui",!0)}),webshims._polyfill&&webshims._polyfill(["es5"]))}(window.webshims?webshims.$:jQuery);