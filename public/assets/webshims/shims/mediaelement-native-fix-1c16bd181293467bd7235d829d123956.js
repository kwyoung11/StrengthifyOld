webshims.register("mediaelement-native-fix",function(e,t,r,d){if(!Modernizr.videoBuffered){var i=function(e){var r=t.data(e,"mediaelementBuffered");return r||(r={buffered:{start:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):0},end:function(e){return e>=r.buffered.length?void t.error("buffered index size error"):r.loaded},length:0},loaded:0},t.data(e,"mediaelementBuffered",r)),r},a=function(r){if(r=r.originalEvent,r&&"lengthComputable"in r){var d=t.data(r.target,"mediaelement");if((!d||"html5"==d.isActive)&&r.lengthComputable&&"loaded"in r){var a=r.target.duration,o=i(r.target);o.loaded=a?r.loaded/r.total*a:0,o.loaded&&(o.buffered.length=1),"load"==r.type&&e(r.target).triggerHandler("progress")}}},o=function(e){var t=i(e.target);t.buffered.length=0,t.loaded=0};["audio","video"].forEach(function(e){var r=t.defineNodeNameProperty(e,"buffered",{prop:{get:function(){var e=t.data(this,"mediaelement");return e&&"flash"==e.isActive&&r.prop._supget?void r.prop._supget.apply(this):i(this).buffered}}})}),function(){var e=d.createElement("video");if(!("preload"in e)&&"autobuffer"in e){var r={metadata:1,none:1};t.onNodeNamesPropertyModify(["audio","video"],["preload"],{set:function(e,d,i){r[e]||"removeAttr"==i?this.autobuffer=!1:"html5"==!(t.data(this,"mediaelement")||{}).isActive&&(this.autobuffer=!0)},initAttr:!0})}}(),t.addReady(function(t,r){e("video, audio",t).add(r.filter("video, audio")).on("load progress",a).on("emptied",o)})}});