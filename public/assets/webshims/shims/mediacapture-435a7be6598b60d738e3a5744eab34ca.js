webshim.register("mediacapture",function(e,t,a,i,r,n){"use strict";var o=-1,s=e.noop,c='input[type="file"].ws-filereader, input[type="file"].ws-capture',d=e.Deferred();!function(){var a,i=!(!navigator.getUserMedia||navigator.wsGetUserMedia),r=swfmini.hasFlashPlayerVersion("11.3"),n=function(){try{sessionStorage.setItem("wsCameras",JSON.stringify(o))}catch(e){}},c=function(){o=0,n(),d.reject(o)},p=function(){n(),d.resolve(o)};try{a=JSON.parse(sessionStorage.getItem("wsCameras")),null==a&&(o=-1)}catch(l){}0===o||-1==o&&!i&&!r?c():r?s=function(){var a=t.cfg.mediaelement,i=a.playerPath||t.cfg.basePath+"swf/"+(a.playerName||"JarisFLVPlayer.swf"),r="wscameralistdetection",n={controltype:"1",jsapi:"1",source:"",id:r,evtId:r},d={id:r,name:r},l={allowscriptaccess:"always",allowNetworking:"all"},u=e('<div><div id="'+r+'"></div></div>').css({position:"absolute",left:-999,width:5,height:5,overflow:"hidden"}).appendTo("body");t.mediaelement.jarisEvent=t.mediaelement.jarisEvent||{},t.mediaelement.jarisEvent[r]=function(e){o=e.cameras,u.remove(),o?p():c()},s=e.noop,swfmini.embedSWF(i,r,"100%","100%","11.3",!1,n,l,d)}:(o=-1,p())}();var p=function(){t.ready("WINDOWLOAD",function(){t.loader.loadList(["mediacapture-picker"])}),p=e.noop},l=function(){if(e(this).is("[capture].ws-filereader, .ws-capture")&&t.implement(this,"capture")){var a,i,r=e(this),n=e('<button type="button" class="ws-capture-button">photo</button>'),o=t.objectCreate(t.wsPopover,{},e.extend({prepareFor:n}));o.element.addClass("capture-popover input-picker"),r.is(".ws-custom-file > *")?(i=r.closest(".ws-custom-file"),a=e('<div class="ws-capture-file" />').insertAfter(i),a.append(n).append(i)):r.before(n),o.element.insertAfter(n),n.on("click",function(){t.mediacapture.showContent(r,n,o),o.show()}),p()}},u=function(){var e=this;s(),d.done(function(){l.call(e)})};t.mediacapture={showContent:function(e,a,i){t.loader.loadList(["mediacapture-picker"]),t.ready("mediacapture-picker",function(){t.mediacapture.showContent(e,a,i)})}},t.defineNodeNamesBooleanProperty("input","capture"),o&&(d.done(function(){u=l,t.loader.addModule("mediacapture-picker",{noAutoCallback:!0,css:"styles/forms-picker.css",options:n})}),t.addReady(function(t,a){e(c,t).add(a.filter(c)).filter('[accept*="image"], :not([accept]), [accept=""]').each(u)}),t.ready("WINDOWLOAD",s)),"complete"==i.readyState&&t.isReady("WINDOWLOAD",!0)});