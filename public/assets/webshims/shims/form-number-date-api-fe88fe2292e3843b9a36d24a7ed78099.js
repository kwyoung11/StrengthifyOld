webshims.register("form-number-date-api",function(e,t,r,n){"use strict";t.addInputType||t.error("you can not call forms-ext feature after calling forms feature. call both at once instead: $.webshims.polyfill('forms forms-ext')"),t.getStep||(t.getStep=function(t,r){var n=e.attr(t,"step");return"any"===n?n:(r=r||o(t),u[r]&&u[r].step?(n=b.number.asNumber(n),(!isNaN(n)&&n>0?n:u[r].step)*(u[r].stepScaleFactor||1)):n)}),t.addMinMaxNumberToCache||(t.addMinMaxNumberToCache=function(e,t,r){e+"AsNumber"in r||(r[e+"AsNumber"]=u[r.type].asNumber(t.attr(e)),isNaN(r[e+"AsNumber"])&&e+"Default"in u[r.type]&&(r[e+"AsNumber"]=u[r.type][e+"Default"]))});var a=parseInt("NaN",10),u=t.inputTypes,i=function(e){return"number"==typeof e||e&&e==1*e},s=function(t){return e('<input type="'+t+'" />').prop("type")===t},o=function(e){return(e.getAttribute("type")||"").toLowerCase()},p=function(e){return e&&!isNaN(1*e)},m=t.addMinMaxNumberToCache,l=function(e,t){e=""+e,t-=e.length;for(var r=0;t>r;r++)e="0"+e;return e},f=1e-7,c=t.bugs.bustedValidity;t.addValidityRule("stepMismatch",function(e,r,n,a){if(""===r)return!1;if("type"in n||(n.type=o(e[0])),"week"==n.type)return!1;var i,s=(a||{}).stepMismatch||!1;if(u[n.type]&&u[n.type].step){if("step"in n||(n.step=t.getStep(e[0],n.type)),"any"==n.step)return!1;if("valueAsNumber"in n||(n.valueAsNumber=u[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;m("min",e,n),i=n.minAsNumber,isNaN(i)&&(i=u[n.type].stepBase||0),s=Math.abs((n.valueAsNumber-i)%n.step),s=!(f>=s||Math.abs(s-n.step)<=f)}return s}),[{name:"rangeOverflow",attr:"max",factor:1},{name:"rangeUnderflow",attr:"min",factor:-1}].forEach(function(e){t.addValidityRule(e.name,function(t,r,n,a){var i=(a||{})[e.name]||!1;if(""===r)return i;if("type"in n||(n.type=o(t[0])),u[n.type]&&u[n.type].asNumber){if("valueAsNumber"in n||(n.valueAsNumber=u[n.type].asNumber(r)),isNaN(n.valueAsNumber))return!1;if(m(e.attr,t,n),isNaN(n[e.attr+"AsNumber"]))return i;i=n[e.attr+"AsNumber"]*e.factor<n.valueAsNumber*e.factor-f}return i})}),t.reflectProperties(["input"],["max","min","step"]);var N=t.defineNodeNameProperty("input","valueAsNumber",{prop:{get:function(){var t=this,r=o(t),n=u[r]&&u[r].asNumber?u[r].asNumber(e.prop(t,"value")):N.prop._supget&&N.prop._supget.apply(t,arguments);return null==n&&(n=a),n},set:function(r){var n=this,a=o(n);if(u[a]&&u[a].numberToString){if(isNaN(r))return e.prop(n,"value",""),void 0;var i=u[a].numberToString(r);i!==!1?e.prop(n,"value",i):t.error("INVALID_STATE_ERR: DOM Exception 11")}else N.prop._supset&&N.prop._supset.apply(n,arguments)}}}),h=t.defineNodeNameProperty("input","valueAsDate",{prop:{get:function(){var t=this,r=o(t);return u[r]&&u[r].asDate&&!u[r].noAsDate?u[r].asDate(e.prop(t,"value")):h.prop._supget&&h.prop._supget.call(t)||null},set:function(r){var n=this,a=o(n);if(!u[a]||!u[a].dateToString||u[a].noAsDate)return h.prop._supset&&h.prop._supset.apply(n,arguments)||null;if(null===r)return e.prop(n,"value",""),"";var i=u[a].dateToString(r);return i!==!1?(e.prop(n,"value",i),i):(t.error("INVALID_STATE_ERR: DOM Exception 11"),void 0)}}});e.each({stepUp:1,stepDown:-1},function(r,n){var a=t.defineNodeNameProperty("input",r,{prop:{value:function(r){var i,s,p,m,l,c,N=o(this);if(!u[N]||!u[N].asNumber){if(a.prop&&a.prop.value)return a.prop.value.apply(this,arguments);throw t.info("no step method for type: "+N),"invalid state error"}if(c={type:N},r||(r=1,t.info("you should always use a factor for stepUp/stepDown")),r*=n,s=e.prop(this,"valueAsNumber"),isNaN(s))throw t.info("valueAsNumber is NaN can't apply stepUp/stepDown "),"invalid state error";if(i=t.getStep(this,N),"any"==i)throw t.info("step is 'any' can't apply stepUp/stepDown"),"invalid state error";if(t.addMinMaxNumberToCache("min",e(this),c),t.addMinMaxNumberToCache("max",e(this),c),i*=r,s=1*(s+i).toFixed(5),m=(s-(c.minAsNumber||0))%i,m&&Math.abs(m)>f&&(l=s-m,l+=m>0?i:-i,s=1*l.toFixed(5)),!isNaN(c.maxAsNumber)&&s>c.maxAsNumber||!isNaN(c.minAsNumber)&&s<c.minAsNumber)throw t.info("max/min overflow can't apply stepUp/stepDown"),"invalid state error";p?e.prop(this,"valueAsDate",p):e.prop(this,"valueAsNumber",s)}}})});var b={number:{mismatch:function(e){return!i(e)},step:1,stepScaleFactor:1,asNumber:function(e){return i(e)?1*e:a},numberToString:function(e){return i(e)?e:!1}},range:{minDefault:0,maxDefault:100},color:{mismatch:function(){var e=/^\u0023[a-f0-9]{6}$/;return function(t){return!t||7!=t.length||!e.test(t)}}()},date:{mismatch:function(e){if(!e||!e.split||!/\d$/.test(e))return!0;var t,r=e.split(/\u002D/);if(3!==r.length)return!0;var n=!1;if(r[0].length<4||2!=r[1].length||r[1]>12||2!=r[2].length||r[2]>33)n=!0;else for(t=0;3>t;t++)if(!p(r[t])){n=!0;break}return n||e!==this.dateToString(this.asDate(e,!0))},step:1,stepScaleFactor:864e5,asDate:function(e,t){return!t&&this.mismatch(e)?null:new Date(this.asNumber(e,!0))},asNumber:function(e,t){var r=a;return(t||!this.mismatch(e))&&(e=e.split(/\u002D/),r=Date.UTC(e[0],e[1]-1,e[2])),r},numberToString:function(e){return i(e)?this.dateToString(new Date(1*e)):!1},dateToString:function(e){return e&&e.getFullYear?l(e.getUTCFullYear(),4)+"-"+l(e.getUTCMonth()+1,2)+"-"+l(e.getUTCDate(),2):!1}},time:{mismatch:function(t,r){if(!t||!t.split||!/\d$/.test(t))return!0;if(t=t.split(/\u003A/),t.length<2||t.length>3)return!0;var n,a=!1;return t[2]&&(t[2]=t[2].split(/\u002E/),n=parseInt(t[2][1],10),t[2]=t[2][0]),e.each(t,function(e,t){return p(t)&&2===t.length?void 0:(a=!0,!1)}),a?!0:t[0]>23||t[0]<0||t[1]>59||t[1]<0?!0:t[2]&&(t[2]>59||t[2]<0)?!0:n&&isNaN(n)?!0:(n&&(100>n?n*=100:10>n&&(n*=10)),r===!0?[t,n]:!1)},step:60,stepBase:0,stepScaleFactor:1e3,asDate:function(e){return e=new Date(this.asNumber(e)),isNaN(e)?null:e},asNumber:function(e){var t=a;return e=this.mismatch(e,!0),e!==!0&&(t=Date.UTC("1970",0,1,e[0][0],e[0][1],e[0][2]||0),e[1]&&(t+=e[1])),t},dateToString:function(e){if(e&&e.getUTCHours){var t=l(e.getUTCHours(),2)+":"+l(e.getUTCMinutes(),2),r=e.getSeconds();return"0"!=r&&(t+=":"+l(r,2)),r=e.getUTCMilliseconds(),"0"!=r&&(t+="."+l(r,3)),t}return!1}},month:{mismatch:function(e){return b.date.mismatch(e+"-01")},step:1,stepScaleFactor:!1,asDate:function(e){return new Date(b.date.asNumber(e+"-01"))},asNumber:function(e){var t=a;return e&&!this.mismatch(e)&&(e=e.split(/\u002D/),e[0]=1*e[0]-1970,e[1]=1*e[1]-1,t=12*e[0]+e[1]),t},numberToString:function(e){var t,r=!1;return i(e)&&(t=e%12,e=(e-t)/12+1970,t+=1,1>t&&(e-=1,t+=12),r=l(e,4)+"-"+l(t,2)),r},dateToString:function(e){if(e&&e.getUTCHours){var t=b.date.dateToString(e);return t.split&&(t=t.split(/\u002D/))?t[0]+"-"+t[1]:!1}return!1}}};!c&&s("range")&&s("time")&&s("month")||(b.range=e.extend({},b.number,b.range),b.time=e.extend({},b.date,b.time),b.month=e.extend({},b.date,b.month)),["number","month","range","date","time","color"].forEach(function(e){(c||!s(e))&&t.addInputType(e,b[e])}),null==e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){if("hidden"==this.type)return null;var t=this.id,r=e(this).closest("label").filter(function(){var e=this.attributes["for"]||{};return!e.specified||e.value==t});return t&&(r=r.add('label[for="'+t+'"]')),r.get()},writeable:!1}})});